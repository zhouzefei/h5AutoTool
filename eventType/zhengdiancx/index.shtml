<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>汽车超人—双十一，整点钜狂欢，high购一整天！</title>
	<meta content="initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <script>
			function resize() {
				window.remFontSize = document.documentElement.clientWidth / 10;
				document.documentElement.style.fontSize = document.documentElement.clientWidth / 10 + "px"
			}
		var b = null;
		window.addEventListener("resize", function() {
			clearTimeout(b), 
			b = setTimeout(resize, 300)
		}, !1);
		resize();
		</script>
    <style>
		html{color:#666;-ms-text-size-adjust:100%;_text-overflow:ellipsis;}
		body,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,select,p,blockquote,th,td,hr,button,article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{margin:0;padding:0}
		body,button,input,select,textarea{font:12px/1.5 hiragino sans gb,microsoft yahei,simsun}
		h1,h2,h3,h4,h5,h6{font-size:1em}
		a{text-decoration:none; cursor:pointer;color:#ffd85d;}
		a:active{outline:0 none}
		@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){a:active{background-color:transparent}}
		small,cite,code,em,th,i,b{font-size:1em;font-style:normal;font-weight:500}
		input,select,textarea,button{font-size:1em;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}
		button,input[type=button],input[type=submit]{cursor:pointer}
		button::-moz-focus-inner,button::-moz-focus-outer,input::-moz-focus-inner,input::-moz-focus-outer{border:0 none;padding:0;margin:0}
		input[type=search]{-webkit-appearance:textfield}
		input:focus::-webkit-input-placeholder{color:transparent}
		img{display:inline-block;vertical-align:bottom;-ms-interpolation-mode:bicubic}
		ul,ol{list-style:none}
		li{vertical-align:top}
		.af-clear{ zoom:1;}
		.af-clear:after{
		content: '\20';
		display: block;
		height: 0;
		clear: both;
		}
		.clear{ clear:both; height:0px; overflow:hidden; width:100%; display:block;}
		body{ overflow-x:hidden; /*font-size: 20px;*/ height:100%;}

		.box{width:100%;}
		.tabList{width:100%; display:-moz-box; display:-webkit-box; display:box;}
		.tabList li:before{display:black;content:" ";width:100%; height:100%; position: absolute;left: 0px;top: 0px; z-index: 1;}
		.tabList li{ -moz-box-flex:1; -webkit-box-flex:1; box-flex:1;text-align:center;padding:0.2rem 0;background: #333333;color: #ffffff;position: relative;}
		.tabList li.cur{background:#f03060; }
		.tabList li.cur:after{content: " ";  width:0;  height:0; border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #f03060;position: absolute;    bottom: -0.2rem;
    left: 50%;
    margin-left: -5px;}
		.tabList li span{display:block;}
		.tabList li span a{color: #ffffff !important;}
		.boxCon h2{background: #efeff4;padding: 0.5rem 0;}
		.rushTlt{padding:0.3rem 0;overflow:hidden;border-bottom: 1px solid #ededed;}
		.rushTlt span,.boxCon h2 span{display:block;text-align:center;}
		.boxCon h2 span{}
		.boxCon h2 .tel{display:block;text-align:center; color: #33cc66; font-size:0.6rem ;}
		.rushTlt span:nth-child(1){width:40%;color: #f03060;}
		.rushTlt span:nth-child(1):before{    
			content: " ";
    display: inline-block;
    height: 0.6rem;
    width: 0.1rem;
    border-radius: 0.1rem;
    background: #f03060;
    position: relative;
    top: 0.1rem;
    margin-right: 5px;
    }
		.rushTlt span:nth-child(2){width:60%;}
		.goodsList{}
		.goodsList li{position:relative;padding:10px; border-bottom: 1px solid #ededed;    min-height: 2.4rem;}
		.goodsList li .goodsImg{width:2.5rem;position:absolute;}
		.goodsList li img{width:100%;}
		.goodsList .goodsName{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
		.goodsList .goodsMesg{padding-left:2.7rem;}
		.goodsMesg .price{margin:0.2rem 0;}
		.price span{font-size:0.4rem; color: #f03060;}
		del{color: #999999;}
		.goodsMesg .goodsNum{overflow:hidden;}
		.goodsNum > span{float:left;height:0.6rem;line-height:0.6rem;color: #666666;}
		
		.goodsNum .progress{
			       float: left;
				    position: relative;
				    width: 25%;
				    height: 0.18rem;
				    background: #fff;
				    margin: 0 5px;
				    border-radius: 0.5rem;
				    overflow: hidden;
				        top: 0.19rem;
				    border: 1px solid #f03060;
		}
		.progress span{position:absolute;display:block;width:80%;background:#f03060;height: 100%;}
		.goBuy{
			display: block;
		    width: 20%;
		    height: 0.8rem;
		    line-height: 0.8rem;
		    text-align: center;
		    background: #ff9900;
		    position: absolute;
		    right: 13px;
		       top: 57%;
		      border-radius: 0.1rem;
			color: #fff;
		}
		.goBuy.off{color: #fff;background: #999999;}
    </style>
</head>
<body>
	<div class="box">
		<div class="head">
			<ul class="tabList">
				<li class="cur">
					<span>19:00-20:00</span>
					<span>抢购进行中</span>
				</li>
				<li>
					<span>21:00-22:00</span>
					<span>已结束</span>
				</li>
				<li>
					<span>23:00-24:00</span>
					<span>即将开抢</span>
				</li>
			</ul>
		</div>
		<div class="boxCon">
			<p class="rushTlt">
				<span>限时限量，疯狂抢购</span>
				<!--span>距离本场结束 <b></b></span-->
			</p>
			<ul class="goodsList">
				<li style="text-align: center;">正在获取商品信息</li>
			</ul>
			<ul class="goodsList">
				<li style="text-align: center;">正在获取商品信息</li>
			</ul>
			<ul class="goodsList">
				<li style="text-align: center;">正在获取商品信息</li>
			</ul>
			<h2>
				<span>客服电话</span>
				<a href="tel:400-699-0000" class="tel">400-699-0000</a>
			</h2>
		</div>
		
	</div>
	<script src="js/zepto.min.js"></script>
	<script>
	var apiurl="http://api.qichechaoren.com";
	var locurl=location.href;
	if(/\.qccr.com/.test(locurl))
	{
		apiurl="http://api.qichechaoren.com"
	}
	var activeTime={
		init:function(){
			$.ajax(
				{
					url:"http://market.qccr.com/seckill/serverInfo.jthml?format=json",
					dataType:"jsonp",
					async:true,
					success:function(data){
						console.log(data);
						  activeTime.now= data.info.now; 
						  nav.init();
						  list.init();
					}
				}
			);
		},
		data:[19,21,23],
		now:new Date().getTime(),
		time:[Date.parse("2015/11/11 19:00"),Date.parse("2015/11/11 20:00"),Date.parse("2015/11/11 21:00"),Date.parse("2015/11/11 22:00"),Date.parse("2015/11/11 23:00"),Date.parse("2015/11/11 23:59")],
	}
	var nav={
		creatElement:function(){
			var strVar = "";
			strVar += "<li class=\""+((activeTime.now<activeTime.time[1])?"cur":"")+"\">";
		    strVar += "<span>19:00-20:00<\/span>";
		    if(activeTime.now<activeTime.time[0])
		    {
		    	strVar += "<span>即将开抢<\/span>";
		    }else if(activeTime.now>activeTime.time[1])
		    {
		    	strVar += "<span>已结束<\/span>";
		    }else
		    {
		    	 strVar += "<span>抢购进行中<\/span>";
		    }
		    strVar += "<\/li>";
		    strVar += "<li class=\""+((activeTime.now>activeTime.time[1]&&activeTime.now<activeTime.time[3])?"cur":"")+"\">";
		    strVar += "<span>21:00-22:00<\/span>";
		    if(activeTime.now<activeTime.time[2])
		    {
		    	strVar += "<span>即将开抢<\/span>";
		    }else if(activeTime.now>activeTime.time[3])
		    {
		    	strVar += "<span>已结束<\/span>";
		    }else
		    {
		    	 strVar += "<span>抢购进行中<\/span>";
		    }
		    strVar += "<\/li>";
		    strVar += "<li class=\""+((activeTime.now>activeTime.time[3])?"cur":"")+"\">";
		    strVar += "<span>23:00-24:00<\/span>";
		    if(activeTime.now<activeTime.time[4])
		    {
		    	strVar += "<span>即将开抢<\/span>";
		    }else if(activeTime.now>activeTime.time[5])
		    {
		    	strVar += "<span>已结束<\/span>";
		    }else
		    {
		    	 strVar += "<span>抢购进行中<\/span>";
		    }
		    strVar += "<\/li>";
		    return strVar;
		},
		render:function(){
			$(".tabList").html(nav.creatElement());
			if((activeTime.now<activeTime.time[1]))
			{
				$(".goodsList").hide().eq(0).show();
			}else if((activeTime.now>activeTime.time[1]&&activeTime.now<activeTime.time[3])){
				
				$(".goodsList").hide().eq(1).show();
			}
			else if((activeTime.now>activeTime.time[3])){
				$(".goodsList").hide().eq(2).show();
			}else
			{
				
				$(".goodsList").hide().eq(0).show();
			}
		}
		,
		tab:function(){
			$(".tabList li").bind("tap",function(){
					var tabindex=$(this).index();
					$(".goodsList").hide();
					$(".tabList li").removeClass("cur").eq(tabindex).addClass("cur");
					$(".goodsList").eq(tabindex).show();
			});
		},
		init:function(){
			nav.render();
			nav.tab();
		}
	}
	var list={
		listData:[],
		creatElement:function(obj){
			var strVar = "";
			for(var i=0;i<obj.goodsList.length;i++)
			{
				//categoryId
				strVar += "<li "
				if(obj.time==19)
			    {
			    	if(activeTime.now>activeTime.time[0])
			    	{
			    		if(obj.goodsList[i].categoryId==10)
			    		strVar +="onclick=\"toApp.tireDetail(\'"+obj.goodsList[i].goodsId+"\')\"";
			    		else
			    		strVar +="onclick=\"toApp.goodDetail(\'"+obj.goodsList[i].goodsId+"\')\"";
			    	}
			    }else if(obj.time==21)
			    {
			    	if(activeTime.now>activeTime.time[2])
			    	{
			    		if(obj.goodsList[i].categoryId==10)
			    		strVar +="onclick=\"toApp.tireDetail(\'"+obj.goodsList[i].goodsId+"\')\"";
			    		else
			    		strVar +="onclick=\"toApp.goodDetail(\'"+obj.goodsList[i].goodsId+"\')\"";
			    	}
			    	
			    }else
			    {
			    	if(activeTime.now>activeTime.time[4])
			    	{
			    		if(obj.goodsList[i].categoryId==10)
			    		strVar +="onclick=\"toApp.tireDetail(\'"+obj.goodsList[i].goodsId+"\')\"";
			    		else
			    		strVar +="onclick=\"toApp.goodDetail(\'"+obj.goodsList[i].goodsId+"\')\"";
			    	}
			    }
				strVar += 	">";
			    strVar += "<p class=\"goodsImg\">";
			    strVar += "	<img src=\""+obj.goodsList[i].image+"\" alt=\"\">";
			    strVar += "<\/p>";
			    strVar += "<div class=\"goodsMesg\">";
			    strVar += "	<p class=\"goodsName\">";
			    strVar += "		"+obj.goodsList[i].goodsName+"";
			    strVar += "	<\/p>";
			    strVar += "	<p class=\"price\">";
			    strVar += "		<span>￥"+obj.goodsList[i].appPrice+"<\/span>";
			    strVar += "		<del>￥"+obj.goodsList[i].marketPrice+"<\/del>";
			    strVar += "	<\/p>";
				
				if(obj.time==19)
			    {
			    	if(activeTime.now<activeTime.time[1])
			    	{
			    		strVar += "	<div class=\"goodsNum\">";
						strVar += "		<span>已抢购"+parseInt((obj.goodsList[i].totalStorage-obj.goodsList[i].leftStorage)/obj.goodsList[i].totalStorage*100)+"%<\/span>";
						strVar += "		<p class=\"progress\">";
						strVar += "			<span style=\"width:"+parseInt((obj.goodsList[i].totalStorage-obj.goodsList[i].leftStorage)/obj.goodsList[i].totalStorage*100)+"%\"><\/span>";
						strVar += "		<\/p>";
						strVar += "	<\/div>";
			    	}
			    }else if(obj.time==21)
			    {
			    	if(activeTime.now<activeTime.time[3])
			    	{
			    		strVar += "	<div class=\"goodsNum\">";
						strVar += "		<span>已抢购"+parseInt((obj.goodsList[i].totalStorage-obj.goodsList[i].leftStorage)/obj.goodsList[i].totalStorage*100)+"%<\/span>";
						strVar += "		<p class=\"progress\">";
						strVar += "			<span style=\"width:"+parseInt((obj.goodsList[i].totalStorage-obj.goodsList[i].leftStorage)/obj.goodsList[i].totalStorage*100)+"%\"><\/span>";
						strVar += "		<\/p>";
						strVar += "	<\/div>";
			    	}
			    	
			    }else
			    {
			    	if(activeTime.now<activeTime.time[5])
			    	{
			    		strVar += "	<div class=\"goodsNum\">";
						strVar += "		<span>已抢购"+parseInt((obj.goodsList[i].totalStorage-obj.goodsList[i].leftStorage)/obj.goodsList[i].totalStorage*100)+"%<\/span>";
						strVar += "		<p class=\"progress\">";
						strVar += "			<span style=\"width:"+parseInt((obj.goodsList[i].totalStorage-obj.goodsList[i].leftStorage)/obj.goodsList[i].totalStorage*100)+"%\"><\/span>";
						strVar += "		<\/p>";
						strVar += "	<\/div>";
			    	}
			    }
			
			    strVar += "<\/div>";
			    if(obj.time==19)
			    {
			    	if((activeTime.now>activeTime.time[0]&&activeTime.now<activeTime.time[1])&&obj.goodsList[i].leftStorage!=0)
					{
						//$(".goodsList").hide().eq(0).show();
						strVar += "<a href=\"javascript:;\" class=\"goBuy\">马上抢<\/a>";
					}else if((activeTime.now>activeTime.time[0]&&activeTime.now<activeTime.time[1])&&obj.goodsList[i].leftStorage==0)
					{
						strVar += "<a href=\"javascript:;\" class=\"goBuy off\">已抢光<\/a>";
					}else if(activeTime.now<activeTime.time[0])
					{
						strVar += "<a href=\"javascript:;\" class=\"goBuy off\">即将开始<\/a>";
					}else if(activeTime.now>activeTime.time[1])
					{
						strVar += "<a href=\"javascript:;\" class=\"goBuy off\">已结束<\/a>";
					}
			    	
			    }else if(obj.time==21)
			    {
			    	if((activeTime.now>activeTime.time[2]&&activeTime.now<activeTime.time[3])&&obj.goodsList[i].leftStorage!=0)
					{
						//$(".goodsList").hide().eq(0).show();
						strVar += "<a href=\"javascript:;\" class=\"goBuy\">马上抢<\/a>";
					}else if((activeTime.now>activeTime.time[2]&&activeTime.now<activeTime.time[3])&&obj.goodsList[i].leftStorage==0)
					{
						strVar += "<a href=\"javascript:;\" class=\"goBuy off\">已抢光<\/a>";
					}else if(activeTime.now<activeTime.time[2])
					{
						strVar += "<a href=\"javascript:;\" class=\"goBuy off\">即将开始<\/a>";
					}else if(activeTime.now>activeTime.time[3])
					{
						strVar += "<a href=\"javascript:;\" class=\"goBuy off\">已结束<\/a>";
					}
			    }else
			    {
			    	if((activeTime.now>activeTime.time[4]&&activeTime.now<activeTime.time[5])&&obj.goodsList[i].leftStorage!=0)
					{
						//$(".goodsList").hide().eq(0).show();
						strVar += "<a href=\"javascript:;\" class=\"goBuy\">马上抢<\/a>";
					}else if((activeTime.now>activeTime.time[4]&&activeTime.now<activeTime.time[5])&&obj.goodsList[i].leftStorage==0)
					{
						strVar += "<a href=\"javascript:;\" class=\"goBuy off\">已抢光<\/a>";
					}else if(activeTime.now<activeTime.time[4])
					{
						strVar += "<a href=\"javascript:;\" class=\"goBuy off\">即将开始<\/a>";
					}else if(activeTime.now>activeTime.time[5])
					{
						strVar += "<a href=\"javascript:;\" class=\"goBuy off\">已结束<\/a>";
					}
			    }
			    strVar += "<\/li>";
				
			}
		    
			return strVar;
			
		},
		render:function(){
			$(".goodsList").eq(0).html(list.creatElement(list.listData[0]));
			$(".goodsList").eq(1).html(list.creatElement(list.listData[1]));
			$(".goodsList").eq(2).html(list.creatElement(list.listData[2]));
		},
		init:function(){
			$.ajax(
				{
					url:apiurl+"/activity/getActGoodsDetail?times=[19,21,23]",
					dataType:"jsonp",
					async:true,
					success:function(data){
						console.log(data);
						if(data.code==0)
						{
						  list.listData=data.info;
						  list.render();
						}else
						{	
							$(".goodsList").html("<li>暂时无法获取商品信息</li>");
						}
						
					}
				}
			);
		}
	}
	var page={
		init:function(){
			activeTime.init();
		}
	}
	page.init();
		var timer=null;
		function ShowCountDown(year,month,day,hour,obj) 
		{ 
			var now = new Date(); 
				endDate = new Date(year, month-1, day,hour),
				leftTime=endDate.getTime()-now.getTime(),
				leftsecond = parseInt(leftTime/1000); 
			//console.log(leftsecond)
			var day1=Math.floor(leftsecond/(60*60*24)); 
			var hour=Math.floor((leftsecond-day1*24*60*60)/3600); 
			var minute=Math.floor((leftsecond-day1*24*60*60-hour*3600)/60); 
			var second=Math.floor(leftsecond-day1*24*60*60-hour*3600-minute*60); 
			var str=(day1>9 ? day1 : '0'+day1) + '：' + (hour>9 ? hour : '0'+hour)+'：'+ (minute>9 ? minute : '0'+minute) +'：'+ (second>9 ? second : '0'+second);
			obj.html(str);			
		}
		
		setTimeout(function(){
			location.reload();
		},5*60000);
		//ShowCountDown(2015,11,3,20,$('.rushTlt b')); 
		//timer=setInterval(function(){ShowCountDown(2015,11,3,19,$('.rushTlt b'));}, 1000);		
	</script>
	<script type="text/javascript" src="../../js/traffics.js"></script>
</body>
</html>